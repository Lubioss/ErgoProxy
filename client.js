const _0x3c244f=_0x2fe3;(function(_0x402e99,_0x36b4c2){const _0x47b047=_0x2fe3,_0x411dd6=_0x402e99();while(!![]){try{const _0xb2436e=-parseInt(_0x47b047(0xd2))/0x1*(-parseInt(_0x47b047(0x10f))/0x2)+parseInt(_0x47b047(0x112))/0x3*(parseInt(_0x47b047(0xcb))/0x4)+-parseInt(_0x47b047(0xf5))/0x5*(parseInt(_0x47b047(0x110))/0x6)+parseInt(_0x47b047(0xe8))/0x7*(parseInt(_0x47b047(0xc0))/0x8)+parseInt(_0x47b047(0xed))/0x9*(parseInt(_0x47b047(0xda))/0xa)+-parseInt(_0x47b047(0xe0))/0xb+parseInt(_0x47b047(0x106))/0xc;if(_0xb2436e===_0x36b4c2)break;else _0x411dd6['push'](_0x411dd6['shift']());}catch(_0x242785){_0x411dd6['push'](_0x411dd6['shift']());}}}(_0x55f4,0x895fc));const client=require(_0x3c244f(0xdb)),http=require(_0x3c244f(0xe4)),BigInt=require('big-integer'),chalk=require(_0x3c244f(0x102)),{ArgumentParser}=require(_0x3c244f(0x109)),{version}=require('./package.json'),parser=new ArgumentParser({'description':'Ergo\x27s\x20proxy'});parser['add_argument']('-v',_0x3c244f(0xee),{'action':_0x3c244f(0xf0),'version':version}),parser[_0x3c244f(0xbf)]('-s',_0x3c244f(0xfd),{'help':_0x3c244f(0xe6),'default':_0x3c244f(0xe3)}),parser[_0x3c244f(0xbf)]('-p','--port',{'help':_0x3c244f(0xf6),'default':_0x3c244f(0xb7)}),parser[_0x3c244f(0xbf)]('-u',_0x3c244f(0xfe),{'help':_0x3c244f(0xe5),'default':'x'}),parser['add_argument']('-w','--password',{'help':'worker\x20password','default':'x'}),parser[_0x3c244f(0xbf)]('-l',_0x3c244f(0xb5),{'help':_0x3c244f(0xcc),'default':0xbb8}),parser[_0x3c244f(0xbf)]('-t','--timeout',{'help':_0x3c244f(0xbe),'default':0x12c}),args=parser[_0x3c244f(0xd1)]();let parameters={'jobs':[],'acceptedShares':0x0,'rejectedShares':0x0,'startTime':new Date(),'intervals':{'stats':null,'connect':null},'client':null};const showStats=()=>{const _0x49840d=_0x3c244f;let _0x13c78c=new Date(),_0x13f545=(_0x13c78c-parameters['startTime'])/0x3e8,_0x59b467=Math[_0x49840d(0xc1)](_0x13f545/0xe10),_0x1ee125=Math[_0x49840d(0xc1)]((_0x13f545-_0x59b467*0xe10)/0x3c);_0x1ee125<0xa&&(_0x1ee125='0'+_0x1ee125),console['log'](chalk[_0x49840d(0x103)](_0x49840d(0xc9))),console[_0x49840d(0xfa)](chalk[_0x49840d(0x103)](_0x49840d(0xf8)+parameters[_0x49840d(0xd9)])),console['log'](chalk[_0x49840d(0x103)]('Rejected:\x20'+parameters[_0x49840d(0xf9)])),console[_0x49840d(0xfa)](chalk[_0x49840d(0x103)]('Time\x20elapsed:\x20'+_0x59b467+':'+_0x1ee125)),console[_0x49840d(0xfa)](chalk['cyanBright']('----------------------------------------\x0a'));};let options={'server':args[_0x3c244f(0xfb)],'port':args[_0x3c244f(0xb4)],'worker':args[_0x3c244f(0xd8)],'password':args[_0x3c244f(0xf2)],'autoReconnectOnError':![],'onConnect':()=>{const _0x2ed230=_0x3c244f;console[_0x2ed230(0xfa)](chalk['greenBright'](_0x2ed230(0xf4))),parameters['intervals'][_0x2ed230(0x107)]=setInterval(()=>{showStats();},0x3e8*0x3c),parameters[_0x2ed230(0xe2)][_0x2ed230(0xea)]!==null&&(clearInterval(parameters[_0x2ed230(0xe2)][_0x2ed230(0xea)]),parameters['intervals'][_0x2ed230(0xea)]=null);},'onClose':()=>{const _0x33b256=_0x3c244f;parameters['jobs']=[],console[_0x33b256(0xfa)](chalk[_0x33b256(0xf3)](_0x33b256(0xca))),parameters['intervals'][_0x33b256(0x107)]&&clearInterval(parameters[_0x33b256(0xe2)][_0x33b256(0x107)]),!parameters[_0x33b256(0xe2)]['connect']&&(parameters[_0x33b256(0xc2)][_0x33b256(0xc2)][_0x33b256(0x104)](),parameters[_0x33b256(0xc2)]['shutdown'](),parameters[_0x33b256(0xc2)]=null,connect());},'onError':_0x2502eb=>{const _0x4c063f=_0x3c244f;console[_0x4c063f(0xfa)](chalk[_0x4c063f(0xf3)](_0x4c063f(0x10c)+_0x2502eb[_0x4c063f(0xb3)]));},'onAuthorizeSuccess':()=>{const _0x45d3aa=_0x3c244f;console[_0x45d3aa(0xfa)](chalk[_0x45d3aa(0xdd)](_0x45d3aa(0xcf)));},'onAuthorizeFail':()=>{const _0x4d33b3=_0x3c244f;console[_0x4d33b3(0xfa)](chalk[_0x4d33b3(0xf3)](_0x4d33b3(0x111)));},'onNewDifficulty':_0x12f182=>{const _0x3312fe=_0x3c244f;console['log'](chalk['cyanBright'](_0x3312fe(0xc5)+_0x12f182));},'onSubscribe':_0x43d898=>{const _0x4b0f53=_0x3c244f;console[_0x4b0f53(0xfa)](chalk[_0x4b0f53(0x103)](_0x4b0f53(0xd4)+_0x43d898[_0x4b0f53(0xce)]+',\x20nonce\x20size:\x20'+_0x43d898[_0x4b0f53(0xd6)]));},'onNewMiningWork':_0x372127=>{const _0x4323d7=_0x3c244f;console[_0x4323d7(0xfa)](_0x4323d7(0xeb),_0x4323d7(0xc4)+_0x372127['jobId']+_0x4323d7(0xd0)+_0x372127[_0x4323d7(0x113)]+',\x20height:\x20'+_0x372127[_0x4323d7(0xbd)]);_0x372127[_0x4323d7(0xb9)]&&(parameters['jobs']=[]);let _0x105972=![];for(let _0x24eba1=0x0;_0x24eba1<parameters[_0x4323d7(0xd5)]['length'];_0x24eba1++){let _0x12cce4=parameters['jobs'][_0x24eba1];if(_0x372127[_0x4323d7(0xd3)]===_0x12cce4[_0x4323d7(0xd3)]&&_0x372127[_0x4323d7(0xce)]===_0x12cce4[_0x4323d7(0xce)]){_0x105972=!![];break;}}!_0x105972&&parameters['jobs'][_0x4323d7(0xff)](_0x372127);},'onSubmitWorkSuccess':(_0x350639,_0x1989d9)=>{const _0x27477b=_0x3c244f;parameters[_0x27477b(0xd9)]+=0x1,console[_0x27477b(0xfa)](chalk[_0x27477b(0xdd)](_0x27477b(0xc7)));},'onSubmitWorkFail':(_0x359f37,_0x591d70)=>{const _0x170ce9=_0x3c244f;parameters['rejectedShares']+=0x1,console[_0x170ce9(0xfa)](chalk[_0x170ce9(0xf3)](_0x170ce9(0xe9)+_0x359f37));}};function doConnect(){const _0xf49d8d=_0x3c244f;parameters['client']&&parameters[_0xf49d8d(0xc2)][_0xf49d8d(0xef)](),parameters['client']=client(options);}function connect(_0x37213f=![]){const _0x2098ec=_0x3c244f;_0x37213f&&doConnect(),parameters[_0x2098ec(0xe2)]['connect']=setInterval(()=>doConnect(),args[_0x2098ec(0xb2)]*0x3e8);}connect(!![]);const handle_candidate=(_0x39587b,_0x141980)=>{const _0x59445e=_0x3c244f;_0x141980[_0x59445e(0x101)](0xc8,{'Content-Type':_0x59445e(0xe7)});var _0x292465=parameters[_0x59445e(0xd5)][0x0];if(_0x292465){var _0x51e667=JSON[_0x59445e(0xc3)]({'msg':_0x292465[_0x59445e(0xd3)],'b':_0x59445e(0xba),'extraNonce1':_0x292465[_0x59445e(0xce)],'extraNonce2Size':_0x292465['extraNonce2Size'],'height':_0x292465[_0x59445e(0xbd)]});const _0x175833=BigInt(_0x292465[_0x59445e(0x113)])['equals'](BigInt(0x0))?BigInt(_0x292465['nbits']):BigInt(_0x292465[_0x59445e(0xdc)])['minus'](BigInt(0x1))[_0x59445e(0x10e)](BigInt(_0x292465['miningDiff']));_0x51e667=_0x51e667[_0x59445e(0xd7)](_0x59445e(0xc6),_0x175833[_0x59445e(0xec)]());}else _0x51e667='{}';_0x141980[_0x59445e(0xbb)](_0x51e667),_0x141980[_0x59445e(0x105)]();},handle_job_completed=(_0x3f4a26,_0x969cac)=>{const _0x55990d=_0x3c244f;_0x969cac[_0x55990d(0x101)](0xc8,{'Content-Type':_0x55990d(0xe7)}),parameters[_0x55990d(0xd5)]['splice'](0x0,0x1),_0x969cac[_0x55990d(0xbb)](_0x55990d(0xf1)),_0x969cac[_0x55990d(0x105)]();},handle_submit_solution=(_0x3d89e6,_0x2826f7)=>{const _0x294d83=_0x3c244f;var _0x21b491=parameters['jobs'][0x0];if(_0x21b491){var _0x370085='';_0x3d89e6['on'](_0x294d83(0x10a),function(_0x27301f){_0x370085+=_0x27301f;}),_0x3d89e6['on'](_0x294d83(0x105),function(){const _0x19c2b0=_0x294d83;_0x370085=JSON[_0x19c2b0(0xfc)](_0x370085);var _0x590845=_0x370085['n'],_0x1cad1e=_0x590845[_0x19c2b0(0xe1)](_0x21b491[_0x19c2b0(0xce)][_0x19c2b0(0xb6)]);parameters[_0x19c2b0(0xc2)]['submit']({'worker_name':args[_0x19c2b0(0xd8)],'job_id':_0x21b491['jobId'],'nonce':_0x590845,'extranonce2':_0x1cad1e});var _0x16e92e=JSON[_0x19c2b0(0xc3)]({'status':'OK'});_0x2826f7['write'](_0x16e92e),_0x2826f7[_0x19c2b0(0x105)]();});}else _0x2826f7[_0x294d83(0xbb)]('{\x22status\x22:\x20\x22fail\x22}');},server=http[_0x3c244f(0xcd)]((_0x5cb786,_0x34c0dd)=>{const _0x316c0d=_0x3c244f;switch(_0x5cb786[_0x316c0d(0xf7)]){case _0x316c0d(0xc8):handle_candidate(_0x5cb786,_0x34c0dd);break;case _0x316c0d(0xbc):handle_submit_solution(_0x5cb786,_0x34c0dd);break;case _0x316c0d(0xdf):handle_job_completed(_0x5cb786,_0x34c0dd);break;default:_0x34c0dd[_0x316c0d(0xbb)](_0x316c0d(0x10b)),_0x34c0dd['end']();}});function _0x55f4(){const _0x3a949d=['[SHARE]\x20Rejected.\x20','connect','[JOB]','toString','56898grnfVp','--version','shutdown','version','{\x22status\x22:\x20\x22OK\x22}','password','red','[CONNECTION]\x20Connected\x20to\x20server.','2199925udSyOX','server\x20listening\x20port','url','Accepted:\x20','rejectedShares','log','server','parse','--server','--worker','push','Ergo\x20Proxy','writeHead','chalk','cyanBright','destroy','end','4014528JZkJYg','stats','Running\x20at\x20http://localhost:','argparse','data','{\x22status\x22:\x20\x22fail\x22}','[ERROR]\x20','yellowBright','multiply','898ncWkTS','12UHhgKr','[WORKER]\x20Unable\x20to\x20authorize.','100479IJeoCB','miningDiff','timeout','message','port','--listen','length','3100','--------------------------------------------------\x0a','clean_jobs','<b_value>','write','/mini/solution','prevhash','connection\x20timeout','add_argument','4480ixebAZ','floor','client','stringify','New\x20job\x20received.\x20Job\x20ID:\x20','[DIFFICULTY]\x20New\x20difficulty:\x20','\x22<b_value>\x22','[SHARE]\x20Accepted.','/mini/candidate','\x0a----------------------------------------','[CONNECTION]\x20Disconnected\x20from\x20server.','108VFoMJW','listening\x20port','createServer','extraNonce1','[WORKER]\x20Authorized.',',\x20difficulty:\x20','parse_args','1873lJnzNs','coinb1','[SUBSCRIBE]\x20Nonce:\x20','jobs','extraNonce2Size','replace','worker','acceptedShares','50WfLYaX','stratum-client','nbits','greenBright','listen','/mini/job/completed','10664588ZWQumc','substr','intervals','3.12.229.36','http','worker\x20name','server\x20ip\x20address','application/json','3759UtUkmf'];_0x55f4=function(){return _0x3a949d;};return _0x55f4();}function _0x2fe3(_0x5af7b1,_0xc69f){const _0x55f4a4=_0x55f4();return _0x2fe3=function(_0x2fe37,_0x4d1123){_0x2fe37=_0x2fe37-0xb2;let _0xa887b=_0x55f4a4[_0x2fe37];return _0xa887b;},_0x2fe3(_0x5af7b1,_0xc69f);}server[_0x3c244f(0xde)](args[_0x3c244f(0xde)],()=>{const _0x11cf23=_0x3c244f;console['log'](chalk[_0x11cf23(0x10d)](_0x11cf23(0x100))),console[_0x11cf23(0xfa)](chalk['yellowBright'](_0x11cf23(0x108)+args['listen'])),console[_0x11cf23(0xfa)](chalk[_0x11cf23(0x10d)](_0x11cf23(0xb8)));});
